---
- name: Python installed
  hosts: baremetal
  tags:
    - deploy
  roles:
    - role: python

- name: Baremetal configured
  hosts: baremetal
  roles:
    - role: baremetal

- name: "abstruse: Traefik configured"
  hosts: baremetal
  tags:
    - deploy
    - redeploy
  vars:
    frontends:
      - name: abstruse
        backend: abstruse
        rule: "Host:ci.m1cr0man.com"
        state: present
    backends:
      - name: abstruse
        id: prod
        address: 10.0.0.20
        port: 6500
        weight: 1
        state: present
  roles:
    - role: traefik
